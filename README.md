# üöå BookingProject ‚Äî —Å–∏—Å—Ç–µ–º–∞ –æ–Ω–ª–∞–π–Ω-–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±–∏–ª–µ—Ç–æ–≤

**Pet-–ø—Ä–æ–µ–∫—Ç.** –°–∏—Å—Ç–µ–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ –∞–≤—Ç–æ–±—É—Å—ã –∏ –º–∞—Ä—à—Ä—É—Ç–∫–∏ –ø–æ –ë–µ–ª–∞—Ä—É—Å–∏. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ: –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∏ —Å–æ–±—ã—Ç–∏–π–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ—Ç –ø–æ–∏—Å–∫–∞ —Ä–µ–π—Å–∞ –¥–æ –æ–ø–ª–∞—Ç—ã –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.

–¶–µ–ª—å ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –Ω–∞–≤—ã–∫–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (Kafka, Saga), –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ø–ª–∞—Ç–µ–∂–∞–º–∏ (Stripe) –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (Keycloak/JWT).

üéØ –¶–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±–∏–ª–µ—Ç–æ–≤ (–ø–æ–∏—Å–∫ ‚Üí –±—Ä–æ–Ω—å ‚Üí –æ–ø–ª–∞—Ç–∞ ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ)

–ü—Ä–∏–º–µ–Ω–∏—Ç—å event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏ Saga pattern

–û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ edge-case —Å—Ü–µ–Ω–∞—Ä–∏–∏ (—Ç–∞–π–º–∞—É—Ç—ã, –ø–æ–≤—Ç–æ—Ä—ã, —Å–±–æ–∏)

–ü—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å production-–ø–æ–¥—Ö–æ–¥ –∫ backend-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

Java 21

Spring Boot 3.5+

Spring Cloud Gateway ‚Äî API Gateway –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

Apache Kafka ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏

MySQL ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

Redis ‚Äî –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (TTL)

Keycloak ‚Äî –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (OAuth2 / JWT)

Stripe API ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π

Docker & Docker Compose ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

Lombok

**Frontend:** React 18, TypeScript, Vite, Tailwind, Radix UI. –ü–æ–∏—Å–∫ —Ä–µ–π—Å–æ–≤, –≤—ã–±–æ—Ä –º–µ—Å—Ç, —Ñ–æ—Ä–º–∞ –ø–∞—Å—Å–∞–∂–∏—Ä–∞, –æ–ø–ª–∞—Ç–∞ (Stripe Checkout), –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç.

üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å —á—ë—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –¥–æ–º–µ–Ω–Ω—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π.

–û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
üîê API Gateway (api-gateway)

–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞

–í–∞–ª–∏–¥–∞—Ü–∏—è JWT —Ç–æ–∫–µ–Ω–æ–≤ (Keycloak)

–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

–ü—Ä–æ–±—Ä–æ—Å userId, roles –≤ downstream-—Å–µ—Ä–≤–∏—Å—ã

üöå Trip Service (trip-service)

–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø—Ä–µ–¥–º–µ—Ç–Ω—É—é –æ–±–ª–∞—Å—Ç—å —Ä–µ–π—Å–æ–≤.

–§—É–Ω–∫—Ü–∏–∏:

–º–∞—Ä—à—Ä—É—Ç—ã (–≥–æ—Ä–æ–¥ ‚Üí –≥–æ—Ä–æ–¥)

—Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

—Ä–µ–π—Å—ã –ø–æ –¥–∞—Ç–∞–º

—Å—Ç–æ–∏–º–æ—Å—Ç—å –±–∏–ª–µ—Ç–æ–≤

–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–µ—Ä–µ–≤–æ–∑—á–∏–∫–µ –∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–µ

–ü—Ä–∏–º–µ—Ä—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:

GET /trips?from=–ú–∏–Ω—Å–∫&to=–ì—Ä–æ–¥–Ω–æ&date=2025-01-10
GET /trips/{tripId}

üé´ Booking Service (booking-service)

–ü—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–æ–∑–¥–∞—ë—Ç –≤—Ä–µ–º–µ–Ω–Ω—É—é –±—Ä–æ–Ω—å

–ü—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ booking-requested

üì¶ Inventory Service (inventory-service)

–£–ø—Ä–∞–≤–ª—è–µ—Ç –º–µ—Å—Ç–∞–º–∏ –≤ –∞–≤—Ç–æ–±—É—Å–µ

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å—ã –º–µ—Å—Ç:

AVAILABLE

HELD (–≤—Ä–µ–º–µ–Ω–Ω–∞—è –±—Ä–æ–Ω—å)

CONFIRMED

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç Redis + TTL –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –º–µ—Å—Ç

üßæ Order Service (order-service)

–£–ø—Ä–∞–≤–ª—è–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∑–∞–∫–∞–∑–∞:

PENDING

CONFIRMED

CANCELLED

–ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ–ø–ª–∞—Ç—É –∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å

–†–µ–∞–ª–∏–∑—É–µ—Ç Saga orchestration

üí≥ Payment Service (payment-service)

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Stripe

–°–æ–∑–¥–∞–Ω–∏–µ PaymentIntent

–û–±—Ä–∞–±–æ—Ç–∫–∞ Stripe Webhook

–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –æ–ø–ª–∞—Ç—ã

üë§ User Profile Service (user-profile-service)

(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç Keycloak)

–ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–∏—Å—Ç–æ—Ä–∏—è –ø–æ–µ–∑–¥–æ–∫

–∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

üì© Notification Service (notification-service)

–û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

Email / Telegram / mock

–°–æ–±—ã—Ç–∏—è:

order-confirmed

order-cancelled

trip-cancelled

üîÑ –û—Å–Ω–æ–≤–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å (Workflow)

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—â–µ—Ç —Ä–µ–π—Å —á–µ—Ä–µ–∑ Trip Service

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

Booking Service –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ booking-requested

Inventory Service —Ä–µ–∑–µ—Ä–≤–∏—Ä—É–µ—Ç –º–µ—Å—Ç–æ (HELD, TTL = 15 –º–∏–Ω—É—Ç)

Order Service —Å–æ–∑–¥–∞—ë—Ç –∑–∞–∫–∞–∑ –≤ —Å—Ç–∞—Ç—É—Å–µ PENDING

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –æ–ø–ª–∞—Ç—É

Stripe –ø—Ä–∏—Å—ã–ª–∞–µ—Ç Webhook –æ–± —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç–µ

Order Service:

–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∑–∞–∫–∞–∑

–ø–µ—Ä–µ–≤–æ–¥–∏—Ç –º–µ—Å—Ç–æ –≤ CONFIRMED

Notification Service –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –±–∏–ª–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

‚è± –í—Ä–µ–º–µ–Ω–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (TTL)

–ú–µ—Å—Ç–∞ —Ä–µ–∑–µ—Ä–≤–∏—Ä—É—é—Ç—Å—è –Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 15 –º–∏–Ω—É—Ç)

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ Redis —Å TTL

–ï—Å–ª–∏ –æ–ø–ª–∞—Ç–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞:

–±—Ä–æ–Ω—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–Ω–∏–º–∞–µ—Ç—Å—è

–∑–∞–∫–∞–∑ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è

–º–µ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ AVAILABLE

üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Ä–æ–ª–∏

–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ Keycloak.

–†–æ–ª–∏:

USER ‚Äî –ø–æ–∫—É–ø–∫–∞ –±–∏–ª–µ—Ç–æ–≤

CARRIER ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–π—Å–∞–º–∏

ADMIN ‚Äî –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

üì¶ Kafka –∏ —Å–æ–±—ã—Ç–∏—è
–û—Å–Ω–æ–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è:

booking-requested

seat-held

seat-released

payment-initiated

payment-confirmed

order-confirmed

order-cancelled

–í—Å–µ consumer‚Äô—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ.

### –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å

- –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ Stripe Webhook –∏ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ Kafka-—Å–æ–æ–±—â–µ–Ω–∏–π (–¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è)
- –¢–∞–π–º–∞—É—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (TTL –≤ Redis, –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è)
- –ß–∞—Å—Ç–∏—á–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ Saga –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Å–ª–µ —Ä–µ—Å—Ç–∞—Ä—Ç–æ–≤

### –°–≤—è–∑–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏

| –°–≤—è–∑–∫–∞              | –ü—Ä–æ—Ç–æ–∫–æ–ª    |
| ------------------- | ----------- |
| Booking ‚Üî Inventory | gRPC        |
| Booking ‚Üî Order     | REST        |
| Booking ‚Üî Payment   | REST        |
| –°–æ–±—ã—Ç–∏—è             | Kafka       |

**–ü–æ—Ç–æ–∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí Booking Service ‚Üí (gRPC: —Ä–µ–∑–µ—Ä–≤ –º–µ—Å—Ç) ‚Üí (REST: —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞) ‚Üí (REST: –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–ø–ª–∞—Ç—ã) ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –æ–ø–ª–∞—Ç—É (Stripe).
